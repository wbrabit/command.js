function CallCommand(f,g,e,h){this.com=f;this.o=g;this.fn=e;this.p=h;this.construct()}CallCommand.prototype={construct:function(){},execute:function(){this.fn.apply(this.o,this.p);this.com.next.apply(this.com,[])},};function SleepCommand(d,c){this.com=d;this.i=c;this.construct()}SleepCommand.prototype={construct:function(){},execute:function(){var c=this.com;var d=this.i;setTimeout(function(){c.next.apply(c,[])},d)},};function PlayCommand(g,h,f,i,j){this.com=g;this.o=h;this.fn=f;this.p=i;this.i=j;this.construct()}PlayCommand.prototype={construct:function(){},execute:function(){var c=this.com;var d=this.i;this.fn.apply(this.o,this.p);setTimeout(function(){c.next.apply(c,[])},d)},};function AsyncCommand(g,h,e,i,j){this.com=g;this.o=h;this.fn=e;this.p=i;this.p.push(this);this.e=j}AsyncCommand.prototype={execute:function(){this.fn.apply(this.o,this.p)},publish:function(){this.com.next.apply(this.com,[])},subscribe:function(c,d){},};function CallbackCommand(f,g,e,h){this.com=f;this.o=g;this.fn=e;this.p=h;this.construct()}CallbackCommand.prototype={construct:function(){},execute:function(){if(this.fn){this.fn.apply(this.o,this.p)}},};function Command(){this.index=0;this.commands=[];this.cb=null;this.construct()}Command.prototype={construct:function(){},call:function(f,e,d){this.commands.push(new CallCommand(this,f,e,d))},sleep:function(c,d){this.commands.push(new SleepCommand(this,c,d))},play:function(h,e,i,g,j){this.commands.push(new PlayCommand(this,h,e,i,g))},async:function(g,f,h,e){this.commands.push(new AsyncCommand(this,g,f,h,e))},callback:function(f,e,d){this.cb=new CallbackCommand(this,f,e,d)},execute:function(){var b=this.commands[this.index];if(b){b.execute()}else{this.next()}},next:function(){this.index++;if(~~this.index>=~~this.commands.length){if(this.cb!==null){this.cb.execute()}}else{var b=this.commands[this.index];b.execute()}},cancel:function(){this.index=this.commands.length},destroy:function(){this.index=this.commands.length;this.cb=null;this.next()}};